\documentclass[a4paper, pdftex, ngerman]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage{caption}
\usepackage{float}
\usepackage{hyperref}

% use \code{...} for monospace font
\def\code#1{\texttt{#1}}

\begin{document}

\bigskip
\bigskip
\bigskip
\bigskip
~\vfill



\begin{center}
\huge Project Report\\
\bigskip
\large AI Birds – Qualitative Physics Knowledge and Strategy Learning to Master a Strategy Game
\end{center}

\vfill~

Lukas Lengenfelder, Katharina Rupp, Kevin Volkert

\newpage


\section{Abstract}
\input{Abstract.tex}

\newpage

\normalsize
\tableofcontents

\newpage

\listoftables

\newpage

\section{Introduction}
Angry Birds has become a popular physics simulation game over the years. The goal of the game is to destroy all pigs in a scene by shooting with birds from a slingshot. Furthermore, there is a score, which rates the player's abilities by adding up points for destroyed objects and pigs.

For humans, the game is easy to understand and figure out where to best aim the birds to achieve the best outcome. Physics simulation games in general are mostly rapidly understood, as humans can analyse what would happen in real world. Thus, they can transfer their knowledge to the game. For Artificial Intelligence, however, it is a big challenge. Many factors have to be integrated in the calculations, such as location, gravity, consistency of the objects and steadiness of structures. 

The bird type, with which is shot, furthermore has to be included in the calculations. This is an essential part, as different bird types have different abilities. For instance, a blue bird parts in three little birds when triggering the effect and is especially effective when destroying ice blocks. Using the bird types not correctly can have a huge impact on the destruction and score. Consequently, it is fundamental for AI in Angry Birds to focus on the different bird types and adjust calculations and strategies to them.

The project aimed to develop an agent for the Angry Birds AI Competition\footnote{\url{http://aibirds.org/}}. For this competition, the task is "to develop an intelligent Angry Birds playing agent that is able to successfully play the game autonomously and without human intervention. The long term goal is to build AI agents that can play new levels better than the best human player". In the competition, the agent plays prescribed levels of Angry Birds without human intervention. There are multiple rounds, in which the agents with the highest score from all levels continue to the next round. In the final round, the agent with the highest score wins the competition.

The following report describes the development of an agent, which focuses on the different bird types. It furthermore evaluates the effectiveness of this approach. The report first states the relevant research in this field we researched, then details the changes made to the version of 2016, including a description of our rule set. Concluding we discuss a benchmark of the agent and propose further work based on our findings.

\newpage
\section{State of the Art}
\input{StateOfArt.tex}
% Papers we read about spatial reasoning etc.?
% What is our approach scientifically("Einrordnung")?

\newpage
\section{The BamBird 2017 Agent}

The BamBird agent submitted to the 2017 \emph{Angry Birds AI Competition} is
based on an agent developed by the BamBirds team of 2016.  In the previous
competition BamBird won using a main gameplay loop, the shot calculation from the provided naïve agent, a knowledge representation and a set of Prolog rules.

\subsection{Changes from the 2016 Agent}

The goal of the project was to improve the old agent without discarding our predecessors'
work. The previous agent was developed under time pressure, and thus, with only little
documentation. After familiarizing with the relevant parts of the code, which is mostly code related to knowledge representation and planning,
we spent a large amount of time on refactoring to prepare for changes. The
Prolog rules in the old planner were considered too convoluted, however.
Therefore, we decided to implement a new planner from scratch (see
\ref{sec:strategies}) and use the old planner as fallback (see \ref{sec:multiple-results}).

\subsubsection{Refactoring and Fixes}
\label{sec:refandfix}
% Subsection about the refactoring we did (ant, throwing out stuff, Scene etc.)
% Why we switched from open-end rank to confidence 0-1 (Resulting in a new format of plans and parser)
% Knowledge: fixed issues, inconsistencies and added features (coordinates, isTower)

% How much detail?

In order to implement our ideas we observed the need to do much
refactoring on the old code. We made the program logic
more obvious and added accurate documentation. We removed a lot of unused code
and improved the interfaces to the knowledge representation and planning.

In addition to our functionality-preserving changes we also fixed a few bugs
that became apparent during refactoring and testing. Most importantly, the
detection of hittable objects (\emph{isHittable} predicate) returned incorrect
results in some situations. This was a big problem because it resulted in
flawed knowledge bases which prevented several rules in the planner from
working as intended. The \emph{isAbove} predicate was incomplete: for each
object at most one object was found to be above it. This, too, prevented a few
rules from working properly. We changed this to include all appropriate
objects in a level.

Further, we added features to the knowledge representation. The coordinates of objects are now added as a comment in the Prolog code to make objects easier identifiable. A new predicate called \emph{isTower} was added, which states whether a given structure is higher than wide.

For the build process of the agent, meaning running the agent for testing purposes or creating a .jar-file for handing in at the competition, we used the tool Apache Ant. This simplified test runs of the agent tremendously.


\subsection{Strategies for Bird Types}
\label{sec:strategies}

In the following, the different strategies, which the agent uses, are described. It is especially focused on the different bird types. In total, six different strategies were developed. The first one concentrates on targeting a pig directly, the second one on collapsing a structure and the third one on black birds. The fourth strategy aims for a domino effect, the fifth to shoot a TNT block and the last one to drop a heavy object.

\subsubsection{Strategy for Targeting a Pig}
\input{TargetBird.tex}

\subsubsection{Strategy for a Domino Effect}
\input{Domino.tex}

\subsubsection{Strategy for Black Birds}
\input{Blackbird.tex}

\subsubsection{Strategy for Collapsing a Structure}
\input{Collapse.tex}

\subsubsection{Strategy for TNT}
\input{TNT.tex}

\subsubsection{Strategy for a Heavy Object}
\input{HeavyObjectStrategy.tex}

\newpage
\section{Evaluation of the Agent}
\label{sec:eval}
\input{Evaluation.tex}

\newpage
\section{Future Work}
\input{FutureWork.tex}

\newpage
\section{Conclusion}
\input{Conclusion.tex}

\newpage
\bibliography{bibliography}
\bibliographystyle{unsrt}

\end{document}